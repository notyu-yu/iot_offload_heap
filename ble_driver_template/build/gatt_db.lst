ARM GAS  /tmp/ccppZJQP.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"gatt_db.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.file 1 "Core/Src/gatt_db.c"
  20              		.section	.text.Add_HWServW2ST_Service,"ax",%progbits
  21              		.align	1
  22              		.global	Add_HWServW2ST_Service
  23              		.syntax unified
  24              		.thumb
  25              		.thumb_func
  27              	Add_HWServW2ST_Service:
  28              	.LFB135:
   1:Core/Src/gatt_db.c **** /**
   2:Core/Src/gatt_db.c ****   ******************************************************************************
   3:Core/Src/gatt_db.c ****   * @file    gatt_db.c
   4:Core/Src/gatt_db.c ****   * @author  SRA Application Team
   5:Core/Src/gatt_db.c ****   * @brief   Functions to build GATT DB and handle GATT events
   6:Core/Src/gatt_db.c ****   ******************************************************************************
   7:Core/Src/gatt_db.c ****   * @attention
   8:Core/Src/gatt_db.c ****   *
   9:Core/Src/gatt_db.c ****   * Copyright (c) 2022 STMicroelectronics.
  10:Core/Src/gatt_db.c ****   * All rights reserved.
  11:Core/Src/gatt_db.c ****   *
  12:Core/Src/gatt_db.c ****   * This software is licensed under terms that can be found in the LICENSE file
  13:Core/Src/gatt_db.c ****   * in the root directory of this software component.
  14:Core/Src/gatt_db.c ****   * If no LICENSE file comes with this software, it is provided AS-IS.
  15:Core/Src/gatt_db.c ****   *
  16:Core/Src/gatt_db.c ****   ******************************************************************************
  17:Core/Src/gatt_db.c ****   */
  18:Core/Src/gatt_db.c **** 
  19:Core/Src/gatt_db.c **** #include <stdio.h>
  20:Core/Src/gatt_db.c **** #include <string.h>
  21:Core/Src/gatt_db.c **** #include <stdlib.h>
  22:Core/Src/gatt_db.c **** #include "bluenrg_def.h"
  23:Core/Src/gatt_db.c **** #include "gatt_db.h"
  24:Core/Src/gatt_db.c **** #include "bluenrg_conf.h"
  25:Core/Src/gatt_db.c **** #include "bluenrg_gatt_aci.h"
  26:Core/Src/gatt_db.c **** 
  27:Core/Src/gatt_db.c **** /** @brief Macro that stores Value into a buffer in Little Endian Format (2 bytes)*/
  28:Core/Src/gatt_db.c **** #define HOST_TO_LE_16(buf, val)    ( ((buf)[0] =  (uint8_t) (val)    ) , \
  29:Core/Src/gatt_db.c ****                                    ((buf)[1] =  (uint8_t) (val>>8) ) )
  30:Core/Src/gatt_db.c **** 
ARM GAS  /tmp/ccppZJQP.s 			page 2


  31:Core/Src/gatt_db.c **** /** @brief Macro that stores Value into a buffer in Little Endian Format (4 bytes) */
  32:Core/Src/gatt_db.c **** #define HOST_TO_LE_32(buf, val)    ( ((buf)[0] =  (uint8_t) (val)     ) , \
  33:Core/Src/gatt_db.c ****                                    ((buf)[1] =  (uint8_t) (val>>8)  ) , \
  34:Core/Src/gatt_db.c ****                                    ((buf)[2] =  (uint8_t) (val>>16) ) , \
  35:Core/Src/gatt_db.c ****                                    ((buf)[3] =  (uint8_t) (val>>24) ) )
  36:Core/Src/gatt_db.c **** 
  37:Core/Src/gatt_db.c **** #define COPY_UUID_128(uuid_struct, uuid_15, uuid_14, uuid_13, uuid_12, uuid_11, uuid_10, uuid_9, uu
  38:Core/Src/gatt_db.c **** do {\
  39:Core/Src/gatt_db.c ****     uuid_struct[0] = uuid_0; uuid_struct[1] = uuid_1; uuid_struct[2] = uuid_2; uuid_struct[3] = uui
  40:Core/Src/gatt_db.c ****         uuid_struct[4] = uuid_4; uuid_struct[5] = uuid_5; uuid_struct[6] = uuid_6; uuid_struct[7] =
  41:Core/Src/gatt_db.c ****             uuid_struct[8] = uuid_8; uuid_struct[9] = uuid_9; uuid_struct[10] = uuid_10; uuid_struc
  42:Core/Src/gatt_db.c ****                 uuid_struct[12] = uuid_12; uuid_struct[13] = uuid_13; uuid_struct[14] = uuid_14; uu
  43:Core/Src/gatt_db.c **** }while(0)
  44:Core/Src/gatt_db.c **** 
  45:Core/Src/gatt_db.c **** /* Hardware Characteristics Service */
  46:Core/Src/gatt_db.c **** #define COPY_HW_SENS_W2ST_SERVICE_UUID(uuid_struct)    COPY_UUID_128(uuid_struct,0x00,0x00,0x00,0x0
  47:Core/Src/gatt_db.c **** #define COPY_ENVIRONMENTAL_W2ST_CHAR_UUID(uuid_struct) COPY_UUID_128(uuid_struct,0x00,0x00,0x00,0x0
  48:Core/Src/gatt_db.c **** #define COPY_ACC_GYRO_MAG_W2ST_CHAR_UUID(uuid_struct)  COPY_UUID_128(uuid_struct,0x00,0xE0,0x00,0x0
  49:Core/Src/gatt_db.c **** /* Software Characteristics Service */
  50:Core/Src/gatt_db.c **** #define COPY_SW_SENS_W2ST_SERVICE_UUID(uuid_struct)    COPY_UUID_128(uuid_struct,0x00,0x00,0x00,0x0
  51:Core/Src/gatt_db.c **** #define COPY_QUATERNIONS_W2ST_CHAR_UUID(uuid_struct)   COPY_UUID_128(uuid_struct,0x00,0x00,0x01,0x0
  52:Core/Src/gatt_db.c **** 
  53:Core/Src/gatt_db.c **** uint16_t HWServW2STHandle, EnvironmentalCharHandle, AccGyroMagCharHandle;
  54:Core/Src/gatt_db.c **** uint16_t SWServW2STHandle, QuaternionsCharHandle;
  55:Core/Src/gatt_db.c **** 
  56:Core/Src/gatt_db.c **** /* UUIDS */
  57:Core/Src/gatt_db.c **** Service_UUID_t service_uuid;
  58:Core/Src/gatt_db.c **** Char_UUID_t char_uuid;
  59:Core/Src/gatt_db.c **** 
  60:Core/Src/gatt_db.c **** extern AxesRaw_t x_axes;
  61:Core/Src/gatt_db.c **** extern AxesRaw_t g_axes;
  62:Core/Src/gatt_db.c **** extern AxesRaw_t m_axes;
  63:Core/Src/gatt_db.c **** 
  64:Core/Src/gatt_db.c **** extern uint16_t connection_handle;
  65:Core/Src/gatt_db.c **** extern uint32_t start_time;
  66:Core/Src/gatt_db.c **** 
  67:Core/Src/gatt_db.c **** /**
  68:Core/Src/gatt_db.c ****  * @brief  Add the 'HW' service (and the Environmental and AccGyr characteristics).
  69:Core/Src/gatt_db.c ****  * @param  None
  70:Core/Src/gatt_db.c ****  * @retval tBleStatus Status
  71:Core/Src/gatt_db.c ****  */
  72:Core/Src/gatt_db.c **** tBleStatus Add_HWServW2ST_Service(void)
  73:Core/Src/gatt_db.c **** {
  29              		.loc 1 73 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 16
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33 0000 70B5     		push	{r4, r5, r6, lr}
  34              	.LCFI0:
  35              		.cfi_def_cfa_offset 16
  36              		.cfi_offset 4, -16
  37              		.cfi_offset 5, -12
  38              		.cfi_offset 6, -8
  39              		.cfi_offset 14, -4
  40 0002 8AB0     		sub	sp, sp, #40
  41              	.LCFI1:
  42              		.cfi_def_cfa_offset 56
ARM GAS  /tmp/ccppZJQP.s 			page 3


  74:Core/Src/gatt_db.c ****   tBleStatus ret;
  43              		.loc 1 74 3 view .LVU1
  75:Core/Src/gatt_db.c ****   uint8_t uuid[16];
  44              		.loc 1 75 3 view .LVU2
  76:Core/Src/gatt_db.c **** 
  77:Core/Src/gatt_db.c ****   /* Add_HWServW2ST_Service */
  78:Core/Src/gatt_db.c ****   COPY_HW_SENS_W2ST_SERVICE_UUID(uuid);
  45              		.loc 1 78 3 view .LVU3
  46              		.loc 1 78 3 view .LVU4
  47 0004 1B23     		movs	r3, #27
  48 0006 8DF81830 		strb	r3, [sp, #24]
  49              		.loc 1 78 3 view .LVU5
  50 000a C523     		movs	r3, #197
  51 000c 8DF81930 		strb	r3, [sp, #25]
  52              		.loc 1 78 3 view .LVU6
  53 0010 D523     		movs	r3, #213
  54 0012 8DF81A30 		strb	r3, [sp, #26]
  55              		.loc 1 78 3 view .LVU7
  56 0016 A523     		movs	r3, #165
  57 0018 8DF81B30 		strb	r3, [sp, #27]
  58              		.loc 1 78 3 view .LVU8
  59 001c 0225     		movs	r5, #2
  60 001e 8DF81C50 		strb	r5, [sp, #28]
  61              		.loc 1 78 3 view .LVU9
  62 0022 0023     		movs	r3, #0
  63 0024 8DF81D30 		strb	r3, [sp, #29]
  64              		.loc 1 78 3 view .LVU10
  65 0028 B422     		movs	r2, #180
  66 002a 8DF81E20 		strb	r2, [sp, #30]
  67              		.loc 1 78 3 view .LVU11
  68 002e 9A22     		movs	r2, #154
  69 0030 8DF81F20 		strb	r2, [sp, #31]
  70              		.loc 1 78 3 view .LVU12
  71 0034 E122     		movs	r2, #225
  72 0036 8DF82020 		strb	r2, [sp, #32]
  73              		.loc 1 78 3 view .LVU13
  74 003a 1122     		movs	r2, #17
  75 003c 8DF82120 		strb	r2, [sp, #33]
  76              		.loc 1 78 3 view .LVU14
  77 0040 4FF0010E 		mov	lr, #1
  78 0044 8DF822E0 		strb	lr, [sp, #34]
  79              		.loc 1 78 3 view .LVU15
  80 0048 8DF82330 		strb	r3, [sp, #35]
  81              		.loc 1 78 3 view .LVU16
  82 004c 8DF82430 		strb	r3, [sp, #36]
  83              		.loc 1 78 3 view .LVU17
  84 0050 8DF82530 		strb	r3, [sp, #37]
  85              		.loc 1 78 3 view .LVU18
  86 0054 8DF82630 		strb	r3, [sp, #38]
  87              		.loc 1 78 3 view .LVU19
  88 0058 8DF82730 		strb	r3, [sp, #39]
  89              		.loc 1 78 3 view .LVU20
  79:Core/Src/gatt_db.c ****   BLUENRG_memcpy(&service_uuid.Service_UUID_128, uuid, 16);
  90              		.loc 1 79 3 view .LVU21
  91 005c 2C4C     		ldr	r4, .L7
  92 005e 0DF1180C 		add	ip, sp, #24
  93 0062 BCE80F00 		ldmia	ip!, {r0, r1, r2, r3}
ARM GAS  /tmp/ccppZJQP.s 			page 4


  94 0066 2060     		str	r0, [r4]	@ unaligned
  95 0068 6160     		str	r1, [r4, #4]	@ unaligned
  96 006a A260     		str	r2, [r4, #8]	@ unaligned
  97 006c E360     		str	r3, [r4, #12]	@ unaligned
  80:Core/Src/gatt_db.c ****   ret = aci_gatt_add_serv(UUID_TYPE_128, service_uuid.Service_UUID_128, PRIMARY_SERVICE,
  98              		.loc 1 80 3 view .LVU22
  99              		.loc 1 80 9 is_stmt 0 view .LVU23
 100 006e 294B     		ldr	r3, .L7+4
 101 0070 0093     		str	r3, [sp]
 102 0072 1023     		movs	r3, #16
 103 0074 7246     		mov	r2, lr
 104 0076 2146     		mov	r1, r4
 105 0078 2846     		mov	r0, r5
 106 007a FFF7FEFF 		bl	aci_gatt_add_serv
 107              	.LVL0:
  81:Core/Src/gatt_db.c ****                           1+3*5, &HWServW2STHandle);
  82:Core/Src/gatt_db.c ****   if (ret != BLE_STATUS_SUCCESS)
 108              		.loc 1 82 3 is_stmt 1 view .LVU24
 109              		.loc 1 82 6 is_stmt 0 view .LVU25
 110 007e 0028     		cmp	r0, #0
 111 0080 40D1     		bne	.L3
  83:Core/Src/gatt_db.c ****     return BLE_STATUS_ERROR;
  84:Core/Src/gatt_db.c **** 
  85:Core/Src/gatt_db.c ****   /* Fill the Environmental BLE Characteristc */
  86:Core/Src/gatt_db.c ****   COPY_ENVIRONMENTAL_W2ST_CHAR_UUID(uuid);
 112              		.loc 1 86 3 is_stmt 1 view .LVU26
 113              		.loc 1 86 3 view .LVU27
 114              		.loc 1 86 3 view .LVU28
 115              		.loc 1 86 3 view .LVU29
 116              		.loc 1 86 3 view .LVU30
 117              		.loc 1 86 3 view .LVU31
 118              		.loc 1 86 3 view .LVU32
 119              		.loc 1 86 3 view .LVU33
 120 0082 3623     		movs	r3, #54
 121 0084 8DF81E30 		strb	r3, [sp, #30]
 122              		.loc 1 86 3 view .LVU34
 123 0088 AC23     		movs	r3, #172
 124 008a 8DF81F30 		strb	r3, [sp, #31]
 125              		.loc 1 86 3 view .LVU35
 126              		.loc 1 86 3 view .LVU36
 127              		.loc 1 86 3 view .LVU37
 128              		.loc 1 86 3 view .LVU38
 129              		.loc 1 86 3 view .LVU39
 130              		.loc 1 86 3 view .LVU40
 131              		.loc 1 86 3 view .LVU41
 132              		.loc 1 86 3 view .LVU42
 133              		.loc 1 86 3 view .LVU43
  87:Core/Src/gatt_db.c ****   uuid[14] |= 0x04; /* One Temperature value*/
 134              		.loc 1 87 3 view .LVU44
 135              		.loc 1 87 12 is_stmt 0 view .LVU45
 136 008e 0426     		movs	r6, #4
 137 0090 8DF82660 		strb	r6, [sp, #38]
  88:Core/Src/gatt_db.c ****   uuid[14] |= 0x10; /* Pressure value*/
 138              		.loc 1 88 3 is_stmt 1 view .LVU46
 139              		.loc 1 88 12 is_stmt 0 view .LVU47
 140 0094 1423     		movs	r3, #20
 141 0096 8DF82630 		strb	r3, [sp, #38]
ARM GAS  /tmp/ccppZJQP.s 			page 5


  89:Core/Src/gatt_db.c ****   BLUENRG_memcpy(&char_uuid.Char_UUID_128, uuid, 16);
 142              		.loc 1 89 3 is_stmt 1 view .LVU48
 143 009a 1F4D     		ldr	r5, .L7+8
 144 009c 06AC     		add	r4, sp, #24
 145 009e 0FCC     		ldmia	r4!, {r0, r1, r2, r3}
 146              	.LVL1:
 147              		.loc 1 89 3 is_stmt 0 view .LVU49
 148 00a0 2860     		str	r0, [r5]	@ unaligned
 149 00a2 6960     		str	r1, [r5, #4]	@ unaligned
 150 00a4 AA60     		str	r2, [r5, #8]	@ unaligned
 151 00a6 EB60     		str	r3, [r5, #12]	@ unaligned
  90:Core/Src/gatt_db.c ****   ret =  aci_gatt_add_char(HWServW2STHandle, UUID_TYPE_128, char_uuid.Char_UUID_128,
 152              		.loc 1 90 3 is_stmt 1 view .LVU50
 153              		.loc 1 90 10 is_stmt 0 view .LVU51
 154 00a8 1C4B     		ldr	r3, .L7+12
 155 00aa 0593     		str	r3, [sp, #20]
 156 00ac 0023     		movs	r3, #0
 157 00ae 0493     		str	r3, [sp, #16]
 158 00b0 1022     		movs	r2, #16
 159 00b2 0392     		str	r2, [sp, #12]
 160 00b4 0296     		str	r6, [sp, #8]
 161 00b6 0193     		str	r3, [sp, #4]
 162 00b8 1223     		movs	r3, #18
 163 00ba 0093     		str	r3, [sp]
 164 00bc 0823     		movs	r3, #8
 165 00be 2A46     		mov	r2, r5
 166 00c0 0221     		movs	r1, #2
 167 00c2 1448     		ldr	r0, .L7+4
 168 00c4 0088     		ldrh	r0, [r0]
 169 00c6 FFF7FEFF 		bl	aci_gatt_add_char
 170              	.LVL2:
  91:Core/Src/gatt_db.c ****                            2+2+4,
  92:Core/Src/gatt_db.c ****                            CHAR_PROP_NOTIFY|CHAR_PROP_READ,
  93:Core/Src/gatt_db.c ****                            ATTR_PERMISSION_NONE,
  94:Core/Src/gatt_db.c ****                            GATT_NOTIFY_READ_REQ_AND_WAIT_FOR_APPL_RESP,
  95:Core/Src/gatt_db.c ****                            16, 0, &EnvironmentalCharHandle);
  96:Core/Src/gatt_db.c ****   if (ret != BLE_STATUS_SUCCESS)
 171              		.loc 1 96 3 is_stmt 1 view .LVU52
 172              		.loc 1 96 6 is_stmt 0 view .LVU53
 173 00ca F0B9     		cbnz	r0, .L4
  97:Core/Src/gatt_db.c ****     return BLE_STATUS_ERROR;
  98:Core/Src/gatt_db.c **** 
  99:Core/Src/gatt_db.c ****   /* Fill the AccGyroMag BLE Characteristc */
 100:Core/Src/gatt_db.c ****   COPY_ACC_GYRO_MAG_W2ST_CHAR_UUID(uuid);
 174              		.loc 1 100 3 is_stmt 1 view .LVU54
 175              		.loc 1 100 3 view .LVU55
 176              		.loc 1 100 3 view .LVU56
 177              		.loc 1 100 3 view .LVU57
 178              		.loc 1 100 3 view .LVU58
 179              		.loc 1 100 3 view .LVU59
 180              		.loc 1 100 3 view .LVU60
 181              		.loc 1 100 3 view .LVU61
 182              		.loc 1 100 3 view .LVU62
 183              		.loc 1 100 3 view .LVU63
 184              		.loc 1 100 3 view .LVU64
 185              		.loc 1 100 3 view .LVU65
 186              		.loc 1 100 3 view .LVU66
ARM GAS  /tmp/ccppZJQP.s 			page 6


 187              		.loc 1 100 3 view .LVU67
 188              		.loc 1 100 3 view .LVU68
 189              		.loc 1 100 3 view .LVU69
 190 00cc E023     		movs	r3, #224
 191 00ce 8DF82630 		strb	r3, [sp, #38]
 192              		.loc 1 100 3 view .LVU70
 193              		.loc 1 100 3 view .LVU71
 101:Core/Src/gatt_db.c ****   BLUENRG_memcpy(&char_uuid.Char_UUID_128, uuid, 16);
 194              		.loc 1 101 3 view .LVU72
 195 00d2 06AC     		add	r4, sp, #24
 196 00d4 0FCC     		ldmia	r4!, {r0, r1, r2, r3}
 197              	.LVL3:
 198              		.loc 1 101 3 is_stmt 0 view .LVU73
 199 00d6 2860     		str	r0, [r5]	@ unaligned
 200 00d8 6960     		str	r1, [r5, #4]	@ unaligned
 201 00da AA60     		str	r2, [r5, #8]	@ unaligned
 202 00dc EB60     		str	r3, [r5, #12]	@ unaligned
 102:Core/Src/gatt_db.c ****   ret =  aci_gatt_add_char(HWServW2STHandle, UUID_TYPE_128, char_uuid.Char_UUID_128,
 203              		.loc 1 102 3 is_stmt 1 view .LVU74
 204              		.loc 1 102 10 is_stmt 0 view .LVU75
 205 00de 104B     		ldr	r3, .L7+16
 206 00e0 0593     		str	r3, [sp, #20]
 207 00e2 0022     		movs	r2, #0
 208 00e4 0492     		str	r2, [sp, #16]
 209 00e6 1023     		movs	r3, #16
 210 00e8 0393     		str	r3, [sp, #12]
 211 00ea 0296     		str	r6, [sp, #8]
 212 00ec 0192     		str	r2, [sp, #4]
 213 00ee 0093     		str	r3, [sp]
 214 00f0 1423     		movs	r3, #20
 215 00f2 2A46     		mov	r2, r5
 216 00f4 0221     		movs	r1, #2
 217 00f6 0748     		ldr	r0, .L7+4
 218 00f8 0088     		ldrh	r0, [r0]
 219 00fa FFF7FEFF 		bl	aci_gatt_add_char
 220              	.LVL4:
 103:Core/Src/gatt_db.c ****                            2+3*3*2,
 104:Core/Src/gatt_db.c ****                            CHAR_PROP_NOTIFY,
 105:Core/Src/gatt_db.c ****                            ATTR_PERMISSION_NONE,
 106:Core/Src/gatt_db.c ****                            GATT_NOTIFY_READ_REQ_AND_WAIT_FOR_APPL_RESP,
 107:Core/Src/gatt_db.c ****                            16, 0, &AccGyroMagCharHandle);
 108:Core/Src/gatt_db.c ****   if (ret != BLE_STATUS_SUCCESS)
 221              		.loc 1 108 3 is_stmt 1 view .LVU76
 222              		.loc 1 108 6 is_stmt 0 view .LVU77
 223 00fe 10B1     		cbz	r0, .L2
 109:Core/Src/gatt_db.c ****     return BLE_STATUS_ERROR;
 224              		.loc 1 109 12 view .LVU78
 225 0100 4720     		movs	r0, #71
 226              	.LVL5:
 227              		.loc 1 109 12 view .LVU79
 228 0102 00E0     		b	.L2
 229              	.LVL6:
 230              	.L3:
  83:Core/Src/gatt_db.c **** 
 231              		.loc 1 83 12 view .LVU80
 232 0104 4720     		movs	r0, #71
 233              	.LVL7:
ARM GAS  /tmp/ccppZJQP.s 			page 7


 234              	.L2:
 110:Core/Src/gatt_db.c **** 
 111:Core/Src/gatt_db.c ****   return BLE_STATUS_SUCCESS;
 112:Core/Src/gatt_db.c **** }
 235              		.loc 1 112 1 view .LVU81
 236 0106 0AB0     		add	sp, sp, #40
 237              	.LCFI2:
 238              		.cfi_remember_state
 239              		.cfi_def_cfa_offset 16
 240              		@ sp needed
 241 0108 70BD     		pop	{r4, r5, r6, pc}
 242              	.LVL8:
 243              	.L4:
 244              	.LCFI3:
 245              		.cfi_restore_state
  97:Core/Src/gatt_db.c **** 
 246              		.loc 1 97 12 view .LVU82
 247 010a 4720     		movs	r0, #71
 248              	.LVL9:
  97:Core/Src/gatt_db.c **** 
 249              		.loc 1 97 12 view .LVU83
 250 010c FBE7     		b	.L2
 251              	.L8:
 252 010e 00BF     		.align	2
 253              	.L7:
 254 0110 00000000 		.word	service_uuid
 255 0114 00000000 		.word	HWServW2STHandle
 256 0118 00000000 		.word	char_uuid
 257 011c 00000000 		.word	EnvironmentalCharHandle
 258 0120 00000000 		.word	AccGyroMagCharHandle
 259              		.cfi_endproc
 260              	.LFE135:
 262              		.section	.text.Add_SWServW2ST_Service,"ax",%progbits
 263              		.align	1
 264              		.global	Add_SWServW2ST_Service
 265              		.syntax unified
 266              		.thumb
 267              		.thumb_func
 269              	Add_SWServW2ST_Service:
 270              	.LFB136:
 113:Core/Src/gatt_db.c **** 
 114:Core/Src/gatt_db.c **** /**
 115:Core/Src/gatt_db.c ****  * @brief  Add the SW Feature service using a vendor specific profile
 116:Core/Src/gatt_db.c ****  * @param  None
 117:Core/Src/gatt_db.c ****  * @retval tBleStatus Status
 118:Core/Src/gatt_db.c ****  */
 119:Core/Src/gatt_db.c **** tBleStatus Add_SWServW2ST_Service(void)
 120:Core/Src/gatt_db.c **** {
 271              		.loc 1 120 1 is_stmt 1 view -0
 272              		.cfi_startproc
 273              		@ args = 0, pretend = 0, frame = 16
 274              		@ frame_needed = 0, uses_anonymous_args = 0
 275 0000 30B5     		push	{r4, r5, lr}
 276              	.LCFI4:
 277              		.cfi_def_cfa_offset 12
 278              		.cfi_offset 4, -12
 279              		.cfi_offset 5, -8
ARM GAS  /tmp/ccppZJQP.s 			page 8


 280              		.cfi_offset 14, -4
 281 0002 8BB0     		sub	sp, sp, #44
 282              	.LCFI5:
 283              		.cfi_def_cfa_offset 56
 121:Core/Src/gatt_db.c ****   tBleStatus ret;
 284              		.loc 1 121 3 view .LVU85
 122:Core/Src/gatt_db.c ****   int32_t NumberOfRecords=1;
 285              		.loc 1 122 3 view .LVU86
 286              	.LVL10:
 123:Core/Src/gatt_db.c ****   uint8_t uuid[16];
 287              		.loc 1 123 3 view .LVU87
 124:Core/Src/gatt_db.c **** 
 125:Core/Src/gatt_db.c ****   COPY_SW_SENS_W2ST_SERVICE_UUID(uuid);
 288              		.loc 1 125 3 view .LVU88
 289              		.loc 1 125 3 view .LVU89
 290 0004 1B23     		movs	r3, #27
 291 0006 8DF81830 		strb	r3, [sp, #24]
 292              		.loc 1 125 3 view .LVU90
 293 000a C523     		movs	r3, #197
 294 000c 8DF81930 		strb	r3, [sp, #25]
 295              		.loc 1 125 3 view .LVU91
 296 0010 D523     		movs	r3, #213
 297 0012 8DF81A30 		strb	r3, [sp, #26]
 298              		.loc 1 125 3 view .LVU92
 299 0016 A523     		movs	r3, #165
 300 0018 8DF81B30 		strb	r3, [sp, #27]
 301              		.loc 1 125 3 view .LVU93
 302 001c 4FF0020E 		mov	lr, #2
 303 0020 8DF81CE0 		strb	lr, [sp, #28]
 304              		.loc 1 125 3 view .LVU94
 305 0024 0023     		movs	r3, #0
 306 0026 8DF81D30 		strb	r3, [sp, #29]
 307              		.loc 1 125 3 view .LVU95
 308 002a B422     		movs	r2, #180
 309 002c 8DF81E20 		strb	r2, [sp, #30]
 310              		.loc 1 125 3 view .LVU96
 311 0030 9A22     		movs	r2, #154
 312 0032 8DF81F20 		strb	r2, [sp, #31]
 313              		.loc 1 125 3 view .LVU97
 314 0036 E122     		movs	r2, #225
 315 0038 8DF82020 		strb	r2, [sp, #32]
 316              		.loc 1 125 3 view .LVU98
 317 003c 1122     		movs	r2, #17
 318 003e 8DF82120 		strb	r2, [sp, #33]
 319              		.loc 1 125 3 view .LVU99
 320 0042 8DF822E0 		strb	lr, [sp, #34]
 321              		.loc 1 125 3 view .LVU100
 322 0046 8DF82330 		strb	r3, [sp, #35]
 323              		.loc 1 125 3 view .LVU101
 324 004a 8DF82430 		strb	r3, [sp, #36]
 325              		.loc 1 125 3 view .LVU102
 326 004e 8DF82530 		strb	r3, [sp, #37]
 327              		.loc 1 125 3 view .LVU103
 328 0052 8DF82630 		strb	r3, [sp, #38]
 329              		.loc 1 125 3 view .LVU104
 330 0056 8DF82730 		strb	r3, [sp, #39]
 331              		.loc 1 125 3 view .LVU105
ARM GAS  /tmp/ccppZJQP.s 			page 9


 126:Core/Src/gatt_db.c ****   BLUENRG_memcpy(&service_uuid.Service_UUID_128, uuid, 16);
 332              		.loc 1 126 3 view .LVU106
 333 005a 1E4C     		ldr	r4, .L15
 334 005c 0DF1180C 		add	ip, sp, #24
 335 0060 BCE80F00 		ldmia	ip!, {r0, r1, r2, r3}
 336 0064 2060     		str	r0, [r4]	@ unaligned
 337 0066 6160     		str	r1, [r4, #4]	@ unaligned
 338 0068 A260     		str	r2, [r4, #8]	@ unaligned
 339 006a E360     		str	r3, [r4, #12]	@ unaligned
 127:Core/Src/gatt_db.c ****   ret = aci_gatt_add_serv(UUID_TYPE_128, service_uuid.Service_UUID_128, PRIMARY_SERVICE,
 340              		.loc 1 127 3 view .LVU107
 341              		.loc 1 127 9 is_stmt 0 view .LVU108
 342 006c 1A4B     		ldr	r3, .L15+4
 343 006e 0093     		str	r3, [sp]
 344 0070 0423     		movs	r3, #4
 345 0072 0122     		movs	r2, #1
 346 0074 2146     		mov	r1, r4
 347 0076 7046     		mov	r0, lr
 348 0078 FFF7FEFF 		bl	aci_gatt_add_serv
 349              	.LVL11:
 128:Core/Src/gatt_db.c ****                           1+3*NumberOfRecords, &SWServW2STHandle);
 129:Core/Src/gatt_db.c **** 
 130:Core/Src/gatt_db.c ****   if (ret != BLE_STATUS_SUCCESS) {
 350              		.loc 1 130 3 is_stmt 1 view .LVU109
 351              		.loc 1 130 6 is_stmt 0 view .LVU110
 352 007c 28BB     		cbnz	r0, .L11
 131:Core/Src/gatt_db.c ****     goto fail;
 132:Core/Src/gatt_db.c ****   }
 133:Core/Src/gatt_db.c **** 
 134:Core/Src/gatt_db.c ****   COPY_QUATERNIONS_W2ST_CHAR_UUID(uuid);
 353              		.loc 1 134 3 is_stmt 1 view .LVU111
 354              		.loc 1 134 3 view .LVU112
 355              		.loc 1 134 3 view .LVU113
 356              		.loc 1 134 3 view .LVU114
 357              		.loc 1 134 3 view .LVU115
 358              		.loc 1 134 3 view .LVU116
 359              		.loc 1 134 3 view .LVU117
 360              		.loc 1 134 3 view .LVU118
 361 007e 3623     		movs	r3, #54
 362 0080 8DF81E30 		strb	r3, [sp, #30]
 363              		.loc 1 134 3 view .LVU119
 364 0084 AC23     		movs	r3, #172
 365 0086 8DF81F30 		strb	r3, [sp, #31]
 366              		.loc 1 134 3 view .LVU120
 367              		.loc 1 134 3 view .LVU121
 368              		.loc 1 134 3 view .LVU122
 369 008a 0123     		movs	r3, #1
 370 008c 8DF82230 		strb	r3, [sp, #34]
 371              		.loc 1 134 3 view .LVU123
 372              		.loc 1 134 3 view .LVU124
 373              		.loc 1 134 3 view .LVU125
 374 0090 8DF82530 		strb	r3, [sp, #37]
 375              		.loc 1 134 3 view .LVU126
 376              		.loc 1 134 3 view .LVU127
 377              		.loc 1 134 3 view .LVU128
 135:Core/Src/gatt_db.c ****   BLUENRG_memcpy(&char_uuid.Char_UUID_128, uuid, 16);
 378              		.loc 1 135 3 view .LVU129
ARM GAS  /tmp/ccppZJQP.s 			page 10


 379 0094 114D     		ldr	r5, .L15+8
 380 0096 06AC     		add	r4, sp, #24
 381 0098 0FCC     		ldmia	r4!, {r0, r1, r2, r3}
 382              	.LVL12:
 383              		.loc 1 135 3 is_stmt 0 view .LVU130
 384 009a 2860     		str	r0, [r5]	@ unaligned
 385 009c 6960     		str	r1, [r5, #4]	@ unaligned
 386 009e AA60     		str	r2, [r5, #8]	@ unaligned
 387 00a0 EB60     		str	r3, [r5, #12]	@ unaligned
 136:Core/Src/gatt_db.c ****   ret =  aci_gatt_add_char(SWServW2STHandle, UUID_TYPE_128, char_uuid.Char_UUID_128,
 388              		.loc 1 136 3 is_stmt 1 view .LVU131
 389              		.loc 1 136 10 is_stmt 0 view .LVU132
 390 00a2 0F4B     		ldr	r3, .L15+12
 391 00a4 0593     		str	r3, [sp, #20]
 392 00a6 0022     		movs	r2, #0
 393 00a8 0492     		str	r2, [sp, #16]
 394 00aa 1023     		movs	r3, #16
 395 00ac 0393     		str	r3, [sp, #12]
 396 00ae 0421     		movs	r1, #4
 397 00b0 0291     		str	r1, [sp, #8]
 398 00b2 0192     		str	r2, [sp, #4]
 399 00b4 0093     		str	r3, [sp]
 400 00b6 0823     		movs	r3, #8
 401 00b8 2A46     		mov	r2, r5
 402 00ba 0221     		movs	r1, #2
 403 00bc 0648     		ldr	r0, .L15+4
 404 00be 0088     		ldrh	r0, [r0]
 405 00c0 FFF7FEFF 		bl	aci_gatt_add_char
 406              	.LVL13:
 137:Core/Src/gatt_db.c ****                            2+6*SEND_N_QUATERNIONS,
 138:Core/Src/gatt_db.c ****                            CHAR_PROP_NOTIFY,
 139:Core/Src/gatt_db.c ****                            ATTR_PERMISSION_NONE,
 140:Core/Src/gatt_db.c ****                            GATT_NOTIFY_READ_REQ_AND_WAIT_FOR_APPL_RESP,
 141:Core/Src/gatt_db.c ****                            16, 0, &QuaternionsCharHandle);
 142:Core/Src/gatt_db.c **** 
 143:Core/Src/gatt_db.c ****   if (ret != BLE_STATUS_SUCCESS) {
 407              		.loc 1 143 3 is_stmt 1 view .LVU133
 408              		.loc 1 143 6 is_stmt 0 view .LVU134
 409 00c4 18B9     		cbnz	r0, .L14
 410              	.LVL14:
 411              	.L10:
 144:Core/Src/gatt_db.c ****     goto fail;
 145:Core/Src/gatt_db.c ****   }
 146:Core/Src/gatt_db.c **** 
 147:Core/Src/gatt_db.c ****   return BLE_STATUS_SUCCESS;
 148:Core/Src/gatt_db.c **** 
 149:Core/Src/gatt_db.c **** fail:
 150:Core/Src/gatt_db.c ****   return BLE_STATUS_ERROR;
 151:Core/Src/gatt_db.c **** }
 412              		.loc 1 151 1 view .LVU135
 413 00c6 0BB0     		add	sp, sp, #44
 414              	.LCFI6:
 415              		.cfi_remember_state
 416              		.cfi_def_cfa_offset 12
 417              		@ sp needed
 418 00c8 30BD     		pop	{r4, r5, pc}
 419              	.LVL15:
ARM GAS  /tmp/ccppZJQP.s 			page 11


 420              	.L11:
 421              	.LCFI7:
 422              		.cfi_restore_state
 150:Core/Src/gatt_db.c **** }
 423              		.loc 1 150 10 view .LVU136
 424 00ca 4720     		movs	r0, #71
 425              	.LVL16:
 150:Core/Src/gatt_db.c **** }
 426              		.loc 1 150 10 view .LVU137
 427 00cc FBE7     		b	.L10
 428              	.LVL17:
 429              	.L14:
 150:Core/Src/gatt_db.c **** }
 430              		.loc 1 150 10 view .LVU138
 431 00ce 4720     		movs	r0, #71
 432              	.LVL18:
 150:Core/Src/gatt_db.c **** }
 433              		.loc 1 150 10 view .LVU139
 434 00d0 F9E7     		b	.L10
 435              	.L16:
 436 00d2 00BF     		.align	2
 437              	.L15:
 438 00d4 00000000 		.word	service_uuid
 439 00d8 00000000 		.word	SWServW2STHandle
 440 00dc 00000000 		.word	char_uuid
 441 00e0 00000000 		.word	QuaternionsCharHandle
 442              		.cfi_endproc
 443              	.LFE136:
 445              		.section	.text.Acc_Update,"ax",%progbits
 446              		.align	1
 447              		.global	Acc_Update
 448              		.syntax unified
 449              		.thumb
 450              		.thumb_func
 452              	Acc_Update:
 453              	.LVL19:
 454              	.LFB137:
 152:Core/Src/gatt_db.c **** 
 153:Core/Src/gatt_db.c **** /**
 154:Core/Src/gatt_db.c ****  * @brief  Update acceleration characteristic value
 155:Core/Src/gatt_db.c ****  * @param  AxesRaw_t structure containing acceleration value in mg.
 156:Core/Src/gatt_db.c ****  * @retval tBleStatus Status
 157:Core/Src/gatt_db.c ****  */
 158:Core/Src/gatt_db.c **** tBleStatus Acc_Update(AxesRaw_t *x_axes, AxesRaw_t *g_axes, AxesRaw_t *m_axes)
 159:Core/Src/gatt_db.c **** {
 455              		.loc 1 159 1 is_stmt 1 view -0
 456              		.cfi_startproc
 457              		@ args = 0, pretend = 0, frame = 24
 458              		@ frame_needed = 0, uses_anonymous_args = 0
 459              		.loc 1 159 1 is_stmt 0 view .LVU141
 460 0000 70B5     		push	{r4, r5, r6, lr}
 461              	.LCFI8:
 462              		.cfi_def_cfa_offset 16
 463              		.cfi_offset 4, -16
 464              		.cfi_offset 5, -12
 465              		.cfi_offset 6, -8
 466              		.cfi_offset 14, -4
ARM GAS  /tmp/ccppZJQP.s 			page 12


 467 0002 88B0     		sub	sp, sp, #32
 468              	.LCFI9:
 469              		.cfi_def_cfa_offset 48
 470 0004 0646     		mov	r6, r0
 471 0006 0D46     		mov	r5, r1
 472 0008 1446     		mov	r4, r2
 160:Core/Src/gatt_db.c ****   uint8_t buff[2+2*3*3];
 473              		.loc 1 160 3 is_stmt 1 view .LVU142
 161:Core/Src/gatt_db.c ****   tBleStatus ret;
 474              		.loc 1 161 3 view .LVU143
 162:Core/Src/gatt_db.c **** 
 163:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff,(HAL_GetTick()>>3));
 475              		.loc 1 163 3 view .LVU144
 476 000a FFF7FEFF 		bl	HAL_GetTick
 477              	.LVL20:
 478              		.loc 1 163 3 is_stmt 0 view .LVU145
 479 000e C0F3C700 		ubfx	r0, r0, #3, #8
 480 0012 8DF80C00 		strb	r0, [sp, #12]
 481 0016 FFF7FEFF 		bl	HAL_GetTick
 482              	.LVL21:
 483 001a C0F3C720 		ubfx	r0, r0, #11, #8
 484 001e 8DF80D00 		strb	r0, [sp, #13]
 164:Core/Src/gatt_db.c **** 
 165:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+2,-x_axes->AXIS_Y);
 485              		.loc 1 165 3 is_stmt 1 view .LVU146
 486 0022 7368     		ldr	r3, [r6, #4]
 487 0024 5A42     		rsbs	r2, r3, #0
 488 0026 8DF80E20 		strb	r2, [sp, #14]
 489 002a C2F30723 		ubfx	r3, r2, #8, #8
 490 002e 8DF80F30 		strb	r3, [sp, #15]
 166:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+4, x_axes->AXIS_X);
 491              		.loc 1 166 3 view .LVU147
 492 0032 3368     		ldr	r3, [r6]
 493 0034 8DF81030 		strb	r3, [sp, #16]
 494 0038 C3F30723 		ubfx	r3, r3, #8, #8
 495 003c 8DF81130 		strb	r3, [sp, #17]
 167:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+6,-x_axes->AXIS_Z);
 496              		.loc 1 167 3 view .LVU148
 497 0040 B368     		ldr	r3, [r6, #8]
 498 0042 5A42     		rsbs	r2, r3, #0
 499 0044 8DF81220 		strb	r2, [sp, #18]
 500 0048 C2F30723 		ubfx	r3, r2, #8, #8
 501 004c 8DF81330 		strb	r3, [sp, #19]
 168:Core/Src/gatt_db.c **** 
 169:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+8,g_axes->AXIS_Y);
 502              		.loc 1 169 3 view .LVU149
 503 0050 6B68     		ldr	r3, [r5, #4]
 504 0052 8DF81430 		strb	r3, [sp, #20]
 505 0056 C3F30723 		ubfx	r3, r3, #8, #8
 506 005a 8DF81530 		strb	r3, [sp, #21]
 170:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+10,g_axes->AXIS_X);
 507              		.loc 1 170 3 view .LVU150
 508 005e 2B68     		ldr	r3, [r5]
 509 0060 8DF81630 		strb	r3, [sp, #22]
 510 0064 C3F30723 		ubfx	r3, r3, #8, #8
 511 0068 8DF81730 		strb	r3, [sp, #23]
 171:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+12,g_axes->AXIS_Z);
ARM GAS  /tmp/ccppZJQP.s 			page 13


 512              		.loc 1 171 3 view .LVU151
 513 006c AB68     		ldr	r3, [r5, #8]
 514 006e 8DF81830 		strb	r3, [sp, #24]
 515 0072 C3F30723 		ubfx	r3, r3, #8, #8
 516 0076 8DF81930 		strb	r3, [sp, #25]
 172:Core/Src/gatt_db.c **** 
 173:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+14,m_axes->AXIS_Y);
 517              		.loc 1 173 3 view .LVU152
 518 007a 6368     		ldr	r3, [r4, #4]
 519 007c 8DF81A30 		strb	r3, [sp, #26]
 520 0080 C3F30723 		ubfx	r3, r3, #8, #8
 521 0084 8DF81B30 		strb	r3, [sp, #27]
 174:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+16,m_axes->AXIS_X);
 522              		.loc 1 174 3 view .LVU153
 523 0088 2368     		ldr	r3, [r4]
 524 008a 8DF81C30 		strb	r3, [sp, #28]
 525 008e C3F30723 		ubfx	r3, r3, #8, #8
 526 0092 8DF81D30 		strb	r3, [sp, #29]
 175:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+18,m_axes->AXIS_Z);
 527              		.loc 1 175 3 view .LVU154
 528 0096 A368     		ldr	r3, [r4, #8]
 529 0098 8DF81E30 		strb	r3, [sp, #30]
 530 009c C3F30723 		ubfx	r3, r3, #8, #8
 531 00a0 8DF81F30 		strb	r3, [sp, #31]
 176:Core/Src/gatt_db.c **** 
 177:Core/Src/gatt_db.c ****   ret = aci_gatt_update_char_value(HWServW2STHandle, AccGyroMagCharHandle,
 532              		.loc 1 177 3 view .LVU155
 533              		.loc 1 177 9 is_stmt 0 view .LVU156
 534 00a4 03AB     		add	r3, sp, #12
 535 00a6 0093     		str	r3, [sp]
 536 00a8 1423     		movs	r3, #20
 537 00aa 0022     		movs	r2, #0
 538 00ac 0549     		ldr	r1, .L22
 539 00ae 0988     		ldrh	r1, [r1]
 540 00b0 0548     		ldr	r0, .L22+4
 541 00b2 0088     		ldrh	r0, [r0]
 542 00b4 FFF7FEFF 		bl	aci_gatt_update_char_value
 543              	.LVL22:
 178:Core/Src/gatt_db.c **** 				   0, 2+2*3*3, buff);
 179:Core/Src/gatt_db.c ****   if (ret != BLE_STATUS_SUCCESS){
 544              		.loc 1 179 3 is_stmt 1 view .LVU157
 545              		.loc 1 179 6 is_stmt 0 view .LVU158
 546 00b8 08B9     		cbnz	r0, .L21
 547              	.L18:
 180:Core/Src/gatt_db.c ****     PRINTF("Error while updating Acceleration characteristic: 0x%02X\n",ret) ;
 181:Core/Src/gatt_db.c ****     return BLE_STATUS_ERROR ;
 182:Core/Src/gatt_db.c ****   }
 183:Core/Src/gatt_db.c **** 
 184:Core/Src/gatt_db.c ****   return BLE_STATUS_SUCCESS;
 185:Core/Src/gatt_db.c **** }
 548              		.loc 1 185 1 view .LVU159
 549 00ba 08B0     		add	sp, sp, #32
 550              	.LCFI10:
 551              		.cfi_remember_state
 552              		.cfi_def_cfa_offset 16
 553              		@ sp needed
 554 00bc 70BD     		pop	{r4, r5, r6, pc}
ARM GAS  /tmp/ccppZJQP.s 			page 14


 555              	.LVL23:
 556              	.L21:
 557              	.LCFI11:
 558              		.cfi_restore_state
 181:Core/Src/gatt_db.c ****   }
 559              		.loc 1 181 12 view .LVU160
 560 00be 4720     		movs	r0, #71
 561 00c0 FBE7     		b	.L18
 562              	.L23:
 563 00c2 00BF     		.align	2
 564              	.L22:
 565 00c4 00000000 		.word	AccGyroMagCharHandle
 566 00c8 00000000 		.word	HWServW2STHandle
 567              		.cfi_endproc
 568              	.LFE137:
 570              		.section	.text.Quat_Update,"ax",%progbits
 571              		.align	1
 572              		.global	Quat_Update
 573              		.syntax unified
 574              		.thumb
 575              		.thumb_func
 577              	Quat_Update:
 578              	.LVL24:
 579              	.LFB138:
 186:Core/Src/gatt_db.c **** 
 187:Core/Src/gatt_db.c **** /**
 188:Core/Src/gatt_db.c ****  * @brief  Update quaternions characteristic value
 189:Core/Src/gatt_db.c ****  * @param  SensorAxes_t *data Structure containing the quaterions
 190:Core/Src/gatt_db.c ****  * @retval tBleStatus      Status
 191:Core/Src/gatt_db.c ****  */
 192:Core/Src/gatt_db.c **** tBleStatus Quat_Update(AxesRaw_t *data)
 193:Core/Src/gatt_db.c **** {
 580              		.loc 1 193 1 is_stmt 1 view -0
 581              		.cfi_startproc
 582              		@ args = 0, pretend = 0, frame = 8
 583              		@ frame_needed = 0, uses_anonymous_args = 0
 584              		.loc 1 193 1 is_stmt 0 view .LVU162
 585 0000 10B5     		push	{r4, lr}
 586              	.LCFI12:
 587              		.cfi_def_cfa_offset 8
 588              		.cfi_offset 4, -8
 589              		.cfi_offset 14, -4
 590 0002 84B0     		sub	sp, sp, #16
 591              	.LCFI13:
 592              		.cfi_def_cfa_offset 24
 593 0004 0446     		mov	r4, r0
 194:Core/Src/gatt_db.c ****   tBleStatus ret;
 594              		.loc 1 194 3 is_stmt 1 view .LVU163
 195:Core/Src/gatt_db.c ****   uint8_t buff[2+6*SEND_N_QUATERNIONS];
 595              		.loc 1 195 3 view .LVU164
 196:Core/Src/gatt_db.c **** 
 197:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff,(HAL_GetTick()>>3));
 596              		.loc 1 197 3 view .LVU165
 597 0006 FFF7FEFF 		bl	HAL_GetTick
 598              	.LVL25:
 599              		.loc 1 197 3 is_stmt 0 view .LVU166
 600 000a C0F3C700 		ubfx	r0, r0, #3, #8
ARM GAS  /tmp/ccppZJQP.s 			page 15


 601 000e 8DF80800 		strb	r0, [sp, #8]
 602 0012 FFF7FEFF 		bl	HAL_GetTick
 603              	.LVL26:
 604 0016 C0F3C720 		ubfx	r0, r0, #11, #8
 605 001a 8DF80900 		strb	r0, [sp, #9]
 198:Core/Src/gatt_db.c **** 
 199:Core/Src/gatt_db.c **** #if SEND_N_QUATERNIONS == 1
 200:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+2,data[0].AXIS_X);
 606              		.loc 1 200 3 is_stmt 1 view .LVU167
 607 001e 2368     		ldr	r3, [r4]
 608 0020 8DF80A30 		strb	r3, [sp, #10]
 609 0024 C3F30723 		ubfx	r3, r3, #8, #8
 610 0028 8DF80B30 		strb	r3, [sp, #11]
 201:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+4,data[0].AXIS_Y);
 611              		.loc 1 201 3 view .LVU168
 612 002c 6368     		ldr	r3, [r4, #4]
 613 002e 8DF80C30 		strb	r3, [sp, #12]
 614 0032 C3F30723 		ubfx	r3, r3, #8, #8
 615 0036 8DF80D30 		strb	r3, [sp, #13]
 202:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+6,data[0].AXIS_Z);
 616              		.loc 1 202 3 view .LVU169
 617 003a A368     		ldr	r3, [r4, #8]
 618 003c 8DF80E30 		strb	r3, [sp, #14]
 619 0040 C3F30723 		ubfx	r3, r3, #8, #8
 620 0044 8DF80F30 		strb	r3, [sp, #15]
 203:Core/Src/gatt_db.c **** #elif SEND_N_QUATERNIONS == 2
 204:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+2,data[0].AXIS_X);
 205:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+4,data[0].AXIS_Y);
 206:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+6,data[0].AXIS_Z);
 207:Core/Src/gatt_db.c **** 
 208:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+8 ,data[1].AXIS_X);
 209:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+10,data[1].AXIS_Y);
 210:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+12,data[1].AXIS_Z);
 211:Core/Src/gatt_db.c **** #elif SEND_N_QUATERNIONS == 3
 212:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+2,data[0].AXIS_X);
 213:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+4,data[0].AXIS_Y);
 214:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+6,data[0].AXIS_Z);
 215:Core/Src/gatt_db.c **** 
 216:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+8 ,data[1].AXIS_X);
 217:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+10,data[1].AXIS_Y);
 218:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+12,data[1].AXIS_Z);
 219:Core/Src/gatt_db.c **** 
 220:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+14,data[2].AXIS_X);
 221:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+16,data[2].AXIS_Y);
 222:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+18,data[2].AXIS_Z);
 223:Core/Src/gatt_db.c **** #else
 224:Core/Src/gatt_db.c **** #error SEND_N_QUATERNIONS could be only 1,2,3
 225:Core/Src/gatt_db.c **** #endif
 226:Core/Src/gatt_db.c **** 
 227:Core/Src/gatt_db.c ****   ret = aci_gatt_update_char_value(SWServW2STHandle, QuaternionsCharHandle,
 621              		.loc 1 227 3 view .LVU170
 622              		.loc 1 227 9 is_stmt 0 view .LVU171
 623 0048 02AB     		add	r3, sp, #8
 624 004a 0093     		str	r3, [sp]
 625 004c 0823     		movs	r3, #8
 626 004e 0022     		movs	r2, #0
 627 0050 0549     		ldr	r1, .L29
ARM GAS  /tmp/ccppZJQP.s 			page 16


 628 0052 0988     		ldrh	r1, [r1]
 629 0054 0548     		ldr	r0, .L29+4
 630 0056 0088     		ldrh	r0, [r0]
 631 0058 FFF7FEFF 		bl	aci_gatt_update_char_value
 632              	.LVL27:
 228:Core/Src/gatt_db.c **** 				   0, 2+6*SEND_N_QUATERNIONS, buff);
 229:Core/Src/gatt_db.c ****   if (ret != BLE_STATUS_SUCCESS){
 633              		.loc 1 229 3 is_stmt 1 view .LVU172
 634              		.loc 1 229 6 is_stmt 0 view .LVU173
 635 005c 08B9     		cbnz	r0, .L28
 636              	.L25:
 230:Core/Src/gatt_db.c ****     PRINTF("Error while updating Sensor Fusion characteristic: 0x%02X\n",ret) ;
 231:Core/Src/gatt_db.c ****     return BLE_STATUS_ERROR ;
 232:Core/Src/gatt_db.c ****   }
 233:Core/Src/gatt_db.c **** 
 234:Core/Src/gatt_db.c ****   return BLE_STATUS_SUCCESS;
 235:Core/Src/gatt_db.c **** }
 637              		.loc 1 235 1 view .LVU174
 638 005e 04B0     		add	sp, sp, #16
 639              	.LCFI14:
 640              		.cfi_remember_state
 641              		.cfi_def_cfa_offset 8
 642              		@ sp needed
 643 0060 10BD     		pop	{r4, pc}
 644              	.LVL28:
 645              	.L28:
 646              	.LCFI15:
 647              		.cfi_restore_state
 231:Core/Src/gatt_db.c ****   }
 648              		.loc 1 231 12 view .LVU175
 649 0062 4720     		movs	r0, #71
 650 0064 FBE7     		b	.L25
 651              	.L30:
 652 0066 00BF     		.align	2
 653              	.L29:
 654 0068 00000000 		.word	QuaternionsCharHandle
 655 006c 00000000 		.word	SWServW2STHandle
 656              		.cfi_endproc
 657              	.LFE138:
 659              		.section	.text.BlueMS_Environmental_Update,"ax",%progbits
 660              		.align	1
 661              		.global	BlueMS_Environmental_Update
 662              		.syntax unified
 663              		.thumb
 664              		.thumb_func
 666              	BlueMS_Environmental_Update:
 667              	.LVL29:
 668              	.LFB140:
 236:Core/Src/gatt_db.c **** 
 237:Core/Src/gatt_db.c **** /*******************************************************************************
 238:Core/Src/gatt_db.c **** * Function Name  : Read_Request_CB.
 239:Core/Src/gatt_db.c **** * Description    : Update the sensor values.
 240:Core/Src/gatt_db.c **** * Input          : Handle of the characteristic to update.
 241:Core/Src/gatt_db.c **** * Return         : None.
 242:Core/Src/gatt_db.c **** *******************************************************************************/
 243:Core/Src/gatt_db.c **** void Read_Request_CB(uint16_t handle)
 244:Core/Src/gatt_db.c **** {
ARM GAS  /tmp/ccppZJQP.s 			page 17


 245:Core/Src/gatt_db.c ****   tBleStatus ret;
 246:Core/Src/gatt_db.c **** 
 247:Core/Src/gatt_db.c ****   if(handle == AccGyroMagCharHandle + 1)
 248:Core/Src/gatt_db.c ****   {
 249:Core/Src/gatt_db.c ****     Acc_Update(&x_axes, &g_axes, &m_axes);
 250:Core/Src/gatt_db.c ****   }
 251:Core/Src/gatt_db.c ****   else if (handle == EnvironmentalCharHandle + 1)
 252:Core/Src/gatt_db.c ****   {
 253:Core/Src/gatt_db.c ****     float data_t, data_p;
 254:Core/Src/gatt_db.c ****     data_t = 27.0 + ((uint64_t)rand()*5)/RAND_MAX; //T sensor emulation
 255:Core/Src/gatt_db.c ****     data_p = 1000.0 + ((uint64_t)rand()*100)/RAND_MAX; //P sensor emulation
 256:Core/Src/gatt_db.c ****     BlueMS_Environmental_Update((int32_t)(data_p *100), (int16_t)(data_t * 10));
 257:Core/Src/gatt_db.c ****   }
 258:Core/Src/gatt_db.c **** 
 259:Core/Src/gatt_db.c ****   if(connection_handle !=0)
 260:Core/Src/gatt_db.c ****   {
 261:Core/Src/gatt_db.c ****     ret = aci_gatt_allow_read(connection_handle);
 262:Core/Src/gatt_db.c ****     if (ret != BLE_STATUS_SUCCESS)
 263:Core/Src/gatt_db.c ****     {
 264:Core/Src/gatt_db.c ****       PRINTF("aci_gatt_allow_read() failed: 0x%02x\r\n", ret);
 265:Core/Src/gatt_db.c ****     }
 266:Core/Src/gatt_db.c ****   }
 267:Core/Src/gatt_db.c **** }
 268:Core/Src/gatt_db.c **** 
 269:Core/Src/gatt_db.c **** tBleStatus BlueMS_Environmental_Update(int32_t press, int16_t temp)
 270:Core/Src/gatt_db.c **** {
 669              		.loc 1 270 1 is_stmt 1 view -0
 670              		.cfi_startproc
 671              		@ args = 0, pretend = 0, frame = 8
 672              		@ frame_needed = 0, uses_anonymous_args = 0
 673              		.loc 1 270 1 is_stmt 0 view .LVU177
 674 0000 30B5     		push	{r4, r5, lr}
 675              	.LCFI16:
 676              		.cfi_def_cfa_offset 12
 677              		.cfi_offset 4, -12
 678              		.cfi_offset 5, -8
 679              		.cfi_offset 14, -4
 680 0002 85B0     		sub	sp, sp, #20
 681              	.LCFI17:
 682              		.cfi_def_cfa_offset 32
 683 0004 0446     		mov	r4, r0
 684 0006 0D46     		mov	r5, r1
 271:Core/Src/gatt_db.c ****   tBleStatus ret;
 685              		.loc 1 271 3 is_stmt 1 view .LVU178
 272:Core/Src/gatt_db.c ****   uint8_t buff[8];
 686              		.loc 1 272 3 view .LVU179
 273:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff, HAL_GetTick()>>3);
 687              		.loc 1 273 3 view .LVU180
 688 0008 FFF7FEFF 		bl	HAL_GetTick
 689              	.LVL30:
 690              		.loc 1 273 3 is_stmt 0 view .LVU181
 691 000c C0F3C700 		ubfx	r0, r0, #3, #8
 692 0010 8DF80800 		strb	r0, [sp, #8]
 693 0014 FFF7FEFF 		bl	HAL_GetTick
 694              	.LVL31:
 695 0018 C0F3C720 		ubfx	r0, r0, #11, #8
 696 001c 8DF80900 		strb	r0, [sp, #9]
ARM GAS  /tmp/ccppZJQP.s 			page 18


 274:Core/Src/gatt_db.c **** 
 275:Core/Src/gatt_db.c ****   HOST_TO_LE_32(buff+2,press);
 697              		.loc 1 275 3 is_stmt 1 view .LVU182
 698 0020 8DF80A40 		strb	r4, [sp, #10]
 699 0024 C4F30723 		ubfx	r3, r4, #8, #8
 700 0028 8DF80B30 		strb	r3, [sp, #11]
 701 002c C4F30743 		ubfx	r3, r4, #16, #8
 702 0030 8DF80C30 		strb	r3, [sp, #12]
 703 0034 240E     		lsrs	r4, r4, #24
 704              	.LVL32:
 705              		.loc 1 275 3 is_stmt 0 view .LVU183
 706 0036 8DF80D40 		strb	r4, [sp, #13]
 276:Core/Src/gatt_db.c ****   HOST_TO_LE_16(buff+6,temp);
 707              		.loc 1 276 3 is_stmt 1 view .LVU184
 708 003a 8DF80E50 		strb	r5, [sp, #14]
 709 003e C5F30725 		ubfx	r5, r5, #8, #8
 710 0042 8DF80F50 		strb	r5, [sp, #15]
 277:Core/Src/gatt_db.c **** 
 278:Core/Src/gatt_db.c ****   ret = aci_gatt_update_char_value(HWServW2STHandle, EnvironmentalCharHandle,
 711              		.loc 1 278 3 view .LVU185
 712              		.loc 1 278 9 is_stmt 0 view .LVU186
 713 0046 02AB     		add	r3, sp, #8
 714 0048 0093     		str	r3, [sp]
 715 004a 0823     		movs	r3, #8
 716 004c 0022     		movs	r2, #0
 717 004e 0549     		ldr	r1, .L36
 718 0050 0988     		ldrh	r1, [r1]
 719 0052 0548     		ldr	r0, .L36+4
 720 0054 0088     		ldrh	r0, [r0]
 721 0056 FFF7FEFF 		bl	aci_gatt_update_char_value
 722              	.LVL33:
 279:Core/Src/gatt_db.c ****                                    0, 8, buff);
 280:Core/Src/gatt_db.c **** 
 281:Core/Src/gatt_db.c ****   if (ret != BLE_STATUS_SUCCESS){
 723              		.loc 1 281 3 is_stmt 1 view .LVU187
 724              		.loc 1 281 6 is_stmt 0 view .LVU188
 725 005a 08B9     		cbnz	r0, .L35
 726              	.L32:
 282:Core/Src/gatt_db.c ****     PRINTF("Error while updating TEMP characteristic: 0x%04X\n",ret) ;
 283:Core/Src/gatt_db.c ****     return BLE_STATUS_ERROR ;
 284:Core/Src/gatt_db.c ****   }
 285:Core/Src/gatt_db.c **** 
 286:Core/Src/gatt_db.c ****   return BLE_STATUS_SUCCESS;
 287:Core/Src/gatt_db.c **** }
 727              		.loc 1 287 1 view .LVU189
 728 005c 05B0     		add	sp, sp, #20
 729              	.LCFI18:
 730              		.cfi_remember_state
 731              		.cfi_def_cfa_offset 12
 732              		@ sp needed
 733 005e 30BD     		pop	{r4, r5, pc}
 734              	.L35:
 735              	.LCFI19:
 736              		.cfi_restore_state
 283:Core/Src/gatt_db.c ****   }
 737              		.loc 1 283 12 view .LVU190
 738 0060 4720     		movs	r0, #71
ARM GAS  /tmp/ccppZJQP.s 			page 19


 739 0062 FBE7     		b	.L32
 740              	.L37:
 741              		.align	2
 742              	.L36:
 743 0064 00000000 		.word	EnvironmentalCharHandle
 744 0068 00000000 		.word	HWServW2STHandle
 745              		.cfi_endproc
 746              	.LFE140:
 748              		.global	__aeabi_uldivmod
 749              		.global	__aeabi_ul2d
 750              		.global	__aeabi_dadd
 751              		.global	__aeabi_d2f
 752              		.section	.text.Read_Request_CB,"ax",%progbits
 753              		.align	1
 754              		.global	Read_Request_CB
 755              		.syntax unified
 756              		.thumb
 757              		.thumb_func
 759              	Read_Request_CB:
 760              	.LVL34:
 761              	.LFB139:
 244:Core/Src/gatt_db.c ****   tBleStatus ret;
 762              		.loc 1 244 1 is_stmt 1 view -0
 763              		.cfi_startproc
 764              		@ args = 0, pretend = 0, frame = 0
 765              		@ frame_needed = 0, uses_anonymous_args = 0
 244:Core/Src/gatt_db.c ****   tBleStatus ret;
 766              		.loc 1 244 1 is_stmt 0 view .LVU192
 767 0000 08B5     		push	{r3, lr}
 768              	.LCFI20:
 769              		.cfi_def_cfa_offset 8
 770              		.cfi_offset 3, -8
 771              		.cfi_offset 14, -4
 772 0002 2DED028B 		vpush.64	{d8}
 773              	.LCFI21:
 774              		.cfi_def_cfa_offset 16
 775              		.cfi_offset 80, -16
 776              		.cfi_offset 81, -12
 245:Core/Src/gatt_db.c **** 
 777              		.loc 1 245 3 is_stmt 1 view .LVU193
 247:Core/Src/gatt_db.c ****   {
 778              		.loc 1 247 3 view .LVU194
 247:Core/Src/gatt_db.c ****   {
 779              		.loc 1 247 37 is_stmt 0 view .LVU195
 780 0006 384B     		ldr	r3, .L46
 781 0008 1B88     		ldrh	r3, [r3]
 782 000a 0133     		adds	r3, r3, #1
 247:Core/Src/gatt_db.c ****   {
 783              		.loc 1 247 5 view .LVU196
 784 000c 9842     		cmp	r0, r3
 785 000e 0BD0     		beq	.L43
 251:Core/Src/gatt_db.c ****   {
 786              		.loc 1 251 8 is_stmt 1 view .LVU197
 251:Core/Src/gatt_db.c ****   {
 787              		.loc 1 251 46 is_stmt 0 view .LVU198
 788 0010 364B     		ldr	r3, .L46+4
 789 0012 1B88     		ldrh	r3, [r3]
ARM GAS  /tmp/ccppZJQP.s 			page 20


 790 0014 0133     		adds	r3, r3, #1
 251:Core/Src/gatt_db.c ****   {
 791              		.loc 1 251 11 view .LVU199
 792 0016 9842     		cmp	r0, r3
 793 0018 0CD0     		beq	.L44
 794              	.LVL35:
 795              	.L40:
 259:Core/Src/gatt_db.c ****   {
 796              		.loc 1 259 3 is_stmt 1 view .LVU200
 259:Core/Src/gatt_db.c ****   {
 797              		.loc 1 259 24 is_stmt 0 view .LVU201
 798 001a 354B     		ldr	r3, .L46+8
 799 001c 1888     		ldrh	r0, [r3]
 259:Core/Src/gatt_db.c ****   {
 800              		.loc 1 259 5 view .LVU202
 801 001e 0028     		cmp	r0, #0
 802 0020 5ED1     		bne	.L45
 803              	.L38:
 267:Core/Src/gatt_db.c **** 
 804              		.loc 1 267 1 view .LVU203
 805 0022 BDEC028B 		vldm	sp!, {d8}
 806              	.LCFI22:
 807              		.cfi_remember_state
 808              		.cfi_restore 80
 809              		.cfi_restore 81
 810              		.cfi_def_cfa_offset 8
 811 0026 08BD     		pop	{r3, pc}
 812              	.LVL36:
 813              	.L43:
 814              	.LCFI23:
 815              		.cfi_restore_state
 249:Core/Src/gatt_db.c ****   }
 816              		.loc 1 249 5 is_stmt 1 view .LVU204
 817 0028 324A     		ldr	r2, .L46+12
 818 002a 3349     		ldr	r1, .L46+16
 819 002c 3348     		ldr	r0, .L46+20
 820              	.LVL37:
 249:Core/Src/gatt_db.c ****   }
 821              		.loc 1 249 5 is_stmt 0 view .LVU205
 822 002e FFF7FEFF 		bl	Acc_Update
 823              	.LVL38:
 824 0032 F2E7     		b	.L40
 825              	.LVL39:
 826              	.L44:
 827              	.LBB2:
 253:Core/Src/gatt_db.c ****     data_t = 27.0 + ((uint64_t)rand()*5)/RAND_MAX; //T sensor emulation
 828              		.loc 1 253 5 is_stmt 1 view .LVU206
 254:Core/Src/gatt_db.c ****     data_p = 1000.0 + ((uint64_t)rand()*100)/RAND_MAX; //P sensor emulation
 829              		.loc 1 254 5 view .LVU207
 254:Core/Src/gatt_db.c ****     data_p = 1000.0 + ((uint64_t)rand()*100)/RAND_MAX; //P sensor emulation
 830              		.loc 1 254 32 is_stmt 0 view .LVU208
 831 0034 FFF7FEFF 		bl	rand
 832              	.LVL40:
 254:Core/Src/gatt_db.c ****     data_p = 1000.0 + ((uint64_t)rand()*100)/RAND_MAX; //P sensor emulation
 833              		.loc 1 254 22 view .LVU209
 834 0038 4FEAE07C 		asr	ip, r0, #31
 254:Core/Src/gatt_db.c ****     data_p = 1000.0 + ((uint64_t)rand()*100)/RAND_MAX; //P sensor emulation
ARM GAS  /tmp/ccppZJQP.s 			page 21


 835              		.loc 1 254 38 view .LVU210
 836 003c 4FEA8C01 		lsl	r1, ip, #2
 837 0040 41EA9071 		orr	r1, r1, r0, lsr #30
 838 0044 8300     		lsls	r3, r0, #2
 839 0046 1818     		adds	r0, r3, r0
 254:Core/Src/gatt_db.c ****     data_p = 1000.0 + ((uint64_t)rand()*100)/RAND_MAX; //P sensor emulation
 840              		.loc 1 254 41 view .LVU211
 841 0048 6FF00042 		mvn	r2, #-2147483648
 842 004c 4FF00003 		mov	r3, #0
 843 0050 4CEB0101 		adc	r1, ip, r1
 844 0054 FFF7FEFF 		bl	__aeabi_uldivmod
 845              	.LVL41:
 254:Core/Src/gatt_db.c ****     data_p = 1000.0 + ((uint64_t)rand()*100)/RAND_MAX; //P sensor emulation
 846              		.loc 1 254 19 view .LVU212
 847 0058 FFF7FEFF 		bl	__aeabi_ul2d
 848              	.LVL42:
 849 005c 0022     		movs	r2, #0
 850 005e 284B     		ldr	r3, .L46+24
 851 0060 FFF7FEFF 		bl	__aeabi_dadd
 852              	.LVL43:
 254:Core/Src/gatt_db.c ****     data_p = 1000.0 + ((uint64_t)rand()*100)/RAND_MAX; //P sensor emulation
 853              		.loc 1 254 12 view .LVU213
 854 0064 FFF7FEFF 		bl	__aeabi_d2f
 855              	.LVL44:
 856 0068 08EE100A 		vmov	s16, r0
 857              	.LVL45:
 255:Core/Src/gatt_db.c ****     BlueMS_Environmental_Update((int32_t)(data_p *100), (int16_t)(data_t * 10));
 858              		.loc 1 255 5 is_stmt 1 view .LVU214
 255:Core/Src/gatt_db.c ****     BlueMS_Environmental_Update((int32_t)(data_p *100), (int16_t)(data_t * 10));
 859              		.loc 1 255 34 is_stmt 0 view .LVU215
 860 006c FFF7FEFF 		bl	rand
 861              	.LVL46:
 255:Core/Src/gatt_db.c ****     BlueMS_Environmental_Update((int32_t)(data_p *100), (int16_t)(data_t * 10));
 862              		.loc 1 255 24 view .LVU216
 863 0070 4FEAE07C 		asr	ip, r0, #31
 255:Core/Src/gatt_db.c ****     BlueMS_Environmental_Update((int32_t)(data_p *100), (int16_t)(data_t * 10));
 864              		.loc 1 255 40 view .LVU217
 865 0074 0318     		adds	r3, r0, r0
 866 0076 4CEB0C02 		adc	r2, ip, ip
 867 007a 1B18     		adds	r3, r3, r0
 868 007c 4CEB0202 		adc	r2, ip, r2
 869 0080 5101     		lsls	r1, r2, #5
 870 0082 41EAD361 		orr	r1, r1, r3, lsr #27
 871 0086 4FEA431E 		lsl	lr, r3, #5
 872 008a 13EB0E03 		adds	r3, r3, lr
 873 008e 42EB0101 		adc	r1, r2, r1
 874 0092 1818     		adds	r0, r3, r0
 255:Core/Src/gatt_db.c ****     BlueMS_Environmental_Update((int32_t)(data_p *100), (int16_t)(data_t * 10));
 875              		.loc 1 255 45 view .LVU218
 876 0094 6FF00042 		mvn	r2, #-2147483648
 877 0098 4FF00003 		mov	r3, #0
 878 009c 4CEB0101 		adc	r1, ip, r1
 879 00a0 FFF7FEFF 		bl	__aeabi_uldivmod
 880              	.LVL47:
 255:Core/Src/gatt_db.c ****     BlueMS_Environmental_Update((int32_t)(data_p *100), (int16_t)(data_t * 10));
 881              		.loc 1 255 21 view .LVU219
 882 00a4 FFF7FEFF 		bl	__aeabi_ul2d
ARM GAS  /tmp/ccppZJQP.s 			page 22


 883              	.LVL48:
 884 00a8 0022     		movs	r2, #0
 885 00aa 164B     		ldr	r3, .L46+28
 886 00ac FFF7FEFF 		bl	__aeabi_dadd
 887              	.LVL49:
 255:Core/Src/gatt_db.c ****     BlueMS_Environmental_Update((int32_t)(data_p *100), (int16_t)(data_t * 10));
 888              		.loc 1 255 12 view .LVU220
 889 00b0 FFF7FEFF 		bl	__aeabi_d2f
 890              	.LVL50:
 891 00b4 07EE900A 		vmov	s15, r0
 892              	.LVL51:
 256:Core/Src/gatt_db.c ****   }
 893              		.loc 1 256 5 is_stmt 1 view .LVU221
 256:Core/Src/gatt_db.c ****   }
 894              		.loc 1 256 50 is_stmt 0 view .LVU222
 895 00b8 9FED137A 		vldr.32	s14, .L46+32
 896 00bc 67EE877A 		vmul.f32	s15, s15, s14
 256:Core/Src/gatt_db.c ****   }
 897              		.loc 1 256 74 view .LVU223
 898 00c0 B2EE047A 		vmov.f32	s14, #1.0e+1
 899 00c4 28EE078A 		vmul.f32	s16, s16, s14
 900              	.LVL52:
 256:Core/Src/gatt_db.c ****   }
 901              		.loc 1 256 5 view .LVU224
 902 00c8 BDEEC88A 		vcvt.s32.f32	s16, s16
 903 00cc 18EE103A 		vmov	r3, s16	@ int
 904 00d0 19B2     		sxth	r1, r3
 905 00d2 FDEEE77A 		vcvt.s32.f32	s15, s15
 906 00d6 17EE900A 		vmov	r0, s15	@ int
 907              	.LVL53:
 256:Core/Src/gatt_db.c ****   }
 908              		.loc 1 256 5 view .LVU225
 909 00da FFF7FEFF 		bl	BlueMS_Environmental_Update
 910              	.LVL54:
 911 00de 9CE7     		b	.L40
 912              	.LVL55:
 913              	.L45:
 256:Core/Src/gatt_db.c ****   }
 914              		.loc 1 256 5 view .LVU226
 915              	.LBE2:
 261:Core/Src/gatt_db.c ****     if (ret != BLE_STATUS_SUCCESS)
 916              		.loc 1 261 5 is_stmt 1 view .LVU227
 261:Core/Src/gatt_db.c ****     if (ret != BLE_STATUS_SUCCESS)
 917              		.loc 1 261 11 is_stmt 0 view .LVU228
 918 00e0 FFF7FEFF 		bl	aci_gatt_allow_read
 919              	.LVL56:
 262:Core/Src/gatt_db.c ****     {
 920              		.loc 1 262 5 is_stmt 1 view .LVU229
 264:Core/Src/gatt_db.c ****     }
 921              		.loc 1 264 62 view .LVU230
 267:Core/Src/gatt_db.c **** 
 922              		.loc 1 267 1 is_stmt 0 view .LVU231
 923 00e4 9DE7     		b	.L38
 924              	.L47:
 925 00e6 00BF     		.align	2
 926              	.L46:
 927 00e8 00000000 		.word	AccGyroMagCharHandle
ARM GAS  /tmp/ccppZJQP.s 			page 23


 928 00ec 00000000 		.word	EnvironmentalCharHandle
 929 00f0 00000000 		.word	connection_handle
 930 00f4 00000000 		.word	m_axes
 931 00f8 00000000 		.word	g_axes
 932 00fc 00000000 		.word	x_axes
 933 0100 00003B40 		.word	1077608448
 934 0104 00408F40 		.word	1083129856
 935 0108 0000C842 		.word	1120403456
 936              		.cfi_endproc
 937              	.LFE139:
 939              		.comm	char_uuid,16,4
 940              		.comm	service_uuid,16,4
 941              		.comm	QuaternionsCharHandle,2,2
 942              		.comm	SWServW2STHandle,2,2
 943              		.comm	AccGyroMagCharHandle,2,2
 944              		.comm	EnvironmentalCharHandle,2,2
 945              		.comm	HWServW2STHandle,2,2
 946              		.text
 947              	.Letext0:
 948              		.file 2 "/usr/arm-none-eabi/include/machine/_default_types.h"
 949              		.file 3 "/usr/arm-none-eabi/include/sys/_stdint.h"
 950              		.file 4 "Middlewares/ST/BlueNRG-MS/includes/bluenrg_def.h"
 951              		.file 5 "Core/Inc/gatt_db.h"
 952              		.file 6 "Middlewares/ST/BlueNRG-MS/includes/bluenrg_gatt_aci.h"
 953              		.file 7 "/usr/arm-none-eabi/include/stdlib.h"
 954              		.file 8 "Drivers/STM32L4xx_HAL_Driver/Inc/stm32l4xx_hal.h"
ARM GAS  /tmp/ccppZJQP.s 			page 24


DEFINED SYMBOLS
                            *ABS*:0000000000000000 gatt_db.c
     /tmp/ccppZJQP.s:21     .text.Add_HWServW2ST_Service:0000000000000000 $t
     /tmp/ccppZJQP.s:27     .text.Add_HWServW2ST_Service:0000000000000000 Add_HWServW2ST_Service
     /tmp/ccppZJQP.s:254    .text.Add_HWServW2ST_Service:0000000000000110 $d
                            *COM*:0000000000000010 service_uuid
                            *COM*:0000000000000002 HWServW2STHandle
                            *COM*:0000000000000010 char_uuid
                            *COM*:0000000000000002 EnvironmentalCharHandle
                            *COM*:0000000000000002 AccGyroMagCharHandle
     /tmp/ccppZJQP.s:263    .text.Add_SWServW2ST_Service:0000000000000000 $t
     /tmp/ccppZJQP.s:269    .text.Add_SWServW2ST_Service:0000000000000000 Add_SWServW2ST_Service
     /tmp/ccppZJQP.s:438    .text.Add_SWServW2ST_Service:00000000000000d4 $d
                            *COM*:0000000000000002 SWServW2STHandle
                            *COM*:0000000000000002 QuaternionsCharHandle
     /tmp/ccppZJQP.s:446    .text.Acc_Update:0000000000000000 $t
     /tmp/ccppZJQP.s:452    .text.Acc_Update:0000000000000000 Acc_Update
     /tmp/ccppZJQP.s:565    .text.Acc_Update:00000000000000c4 $d
     /tmp/ccppZJQP.s:571    .text.Quat_Update:0000000000000000 $t
     /tmp/ccppZJQP.s:577    .text.Quat_Update:0000000000000000 Quat_Update
     /tmp/ccppZJQP.s:654    .text.Quat_Update:0000000000000068 $d
     /tmp/ccppZJQP.s:660    .text.BlueMS_Environmental_Update:0000000000000000 $t
     /tmp/ccppZJQP.s:666    .text.BlueMS_Environmental_Update:0000000000000000 BlueMS_Environmental_Update
     /tmp/ccppZJQP.s:743    .text.BlueMS_Environmental_Update:0000000000000064 $d
     /tmp/ccppZJQP.s:753    .text.Read_Request_CB:0000000000000000 $t
     /tmp/ccppZJQP.s:759    .text.Read_Request_CB:0000000000000000 Read_Request_CB
     /tmp/ccppZJQP.s:927    .text.Read_Request_CB:00000000000000e8 $d

UNDEFINED SYMBOLS
aci_gatt_add_serv
aci_gatt_add_char
HAL_GetTick
aci_gatt_update_char_value
__aeabi_uldivmod
__aeabi_ul2d
__aeabi_dadd
__aeabi_d2f
rand
aci_gatt_allow_read
connection_handle
m_axes
g_axes
x_axes
